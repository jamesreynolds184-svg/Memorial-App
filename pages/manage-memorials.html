<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Memorials (Admin)</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body class="memorials-bg">
  <button id="burger-menu" class="burger-button" aria-label="Open menu">☰</button>

  <nav id="menu-items" aria-label="Main">
    <a href="home.html">Home</a>
    <a href="pages/memorials.html">View all memorials</a>
    <a href="pages/search-by-zone.html">Search by zone</a>
    <a href="pages/nearby-memorials.html">Nearby Memorials</a>
    <a href="pages/ar-view.html">AR View</a>
    <a href="pages/saved.html">Saved</a>
  </nav>

  <div id="menu-overlay"></div>

  <main class="hero">
    <div class="welcome memorials-panel">
      <h1>Manage Memorials</h1>

      <div class="tabs">
        <div class="tab-buttons">
          <a href="#add"  class="tab-button active" data-tab="add">Add memorial</a>
          <a href="#list" class="tab-button" data-tab="list">All memorials</a>
          <a href="#raw"  class="tab-button" data-tab="raw">Raw JSON</a>
        </div>

        <!-- Tab 1: Add memorial -->
        <section id="tab-add" class="tab-panel active">
          <div class="info">
            Click “Choose memorials.json” to save directly using the File System Access API (Chromium over http/https). Otherwise, use “Download updated JSON” and replace /data/memorials.json manually. Map path is set to /img/maps/map-&lt;zone&gt;.png
          </div>

          <div class="button-row">
            <button id="choose-file" type="button">Choose memorials.json</button>
            <span id="file-status" class="muted">No file chosen</span>
          </div>

          <form id="add-form">
            <div class="form-row">
              <label for="mm-name">Name</label>
              <input id="mm-name" type="text" required placeholder="Memorial name">
            </div>
            <div class="form-row">
              <label for="mm-zone">Zone (1–16)</label>
              <input id="mm-zone" type="number" min="1" max="16" required placeholder="e.g. 12">
            </div>
            <div class="form-row">
              <label for="mm-desc">Description</label>
              <textarea id="mm-desc" rows="5" required placeholder="Short description"></textarea>
            </div>

            <div class="button-row">
              <button id="add-btn" type="submit">Add memorial</button>
              <button id="export-btn" type="button">Export JSON</button>
            </div>
          </form>

          <div id="add-result" class="status"></div>
        </section>

        <!-- Tab 2: All memorials (delete) -->
        <section id="tab-list" class="tab-panel">
          <div class="info">Select a memorial to delete it from memorials.json.</div>
          <ul id="admin-list" class="memorials-list"></ul>
          <div id="list-result" class="status"></div>
        </section>

        <!-- Tab 3: Raw JSON -->
        <section id="tab-raw" class="tab-panel">
          <div class="info">
            Read-only view of /data/memorials.json
            <div class="button-row" style="margin-top:8px">
              <button id="normalize-all" type="button">Normalize descriptions (bullets → “- ”)</button>
            </div>
          </div>
          <pre id="raw-json" class="raw-json">// Loading…</pre>
        </section>
      </div>
    </div>
  </main>

  <!-- Ensure correct scripts are included -->
  <script src="../js/app.js"></script>
  <script src="../js/manage-memorials.js"></script>
</body>
</html>